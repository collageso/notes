
2024-09-13 20:54

Tags: [[객체지향 프로그래밍]]


- 동적 메서드 탐색 과정
	- 메시지를 수신한 객체는 먼저 자신을 생성한 클래스에 적합한 메서드가 존재하는지 검사한다. 존재하면 메서드를 실행하고 탐색을 종료한다.
	- 메서드를 찾지 못했다면 부모 클래스에서 메서드 탐색을 계속한다. 이 과정은 적합한 메서드를 찾을 때까지 상속 계층을 따라 올라가며 계속된다.
	- 상속 계층의 가장 최상위 클래스(Object)에 이르렀지만 메서드를 발견하지 못한 경우 예외를 발생시키며 탐색을 중단한다.

- self 참조(self reference)
	- 객체가 메시지를 수신하면 컴파일러는 self 참조라는 임시 변수를 자동으로 생성한 후 메시지를 수신한 객체를 가리키도록 설정한다.
	- 동적 메서드 탐색은 self가 가리키는 객체의 클래스에서 시작해서 상속 계층의 역방향으로 이뤄지며 메서드 탐색이 종료되는 순간 self 참조는 자동으로 소멸된다.
	- self 참조 -> 메모리 (객체의 현재 상태 데이터) / class 포인터 -> 자신의 클래스 정보(메서드) / parent 포인터 -> 부모 클래스 / parent 포인터 -> ... -> Object
		- 시스템은 메시지를 처리할 메서드를 탐색하기 위해 self 참조가 가리키는 메모리로 이동한다. 이 메모리에는 객체의 현재 상태를 표현하는 데이터와 객체의 클래스를 가리키는 class 포인터가 존재한다. class 포인터를 따라 이동하면 메모리에 로드된 자기 자신의 클래스 정보(메서드)를 읽을 수 있다. 이 목록 안에 메시지를 처리할 적절한 메서드가 있다면 해당 메서드를 실행한 후 동적 메서드 탐색을 종료하고, 아니라면 parent 참조를 따라 부모 클래스로 이동한 후 메서드 탐색을 계속한다. 최상위 클래스(Object)에 이르러서도 적절한 메서드를 찾지 못한 경우에는 에러를 발생시키고 메서드 탐색을 종료한다.

- 동적 메서드 탐색의 두 가지 원리
	- 자동적인 메시지 위임
		- 자식 클래스는 자신이 이해할 수 없는 메시지를 전송받은 경우 상속 계층을 따라 부모 클래스에게 자동적으로 처리를 위임한다.
		- 동적 메서드 탐색의 입장에서 상속 계층은 메시지를 수신한 객체가 자신이 이해할 수 없는 메시지를 부모 클래스에게 전달하기 위한 물리적인 경로를 정의하는 것으로 볼 수 있다.
		- 상속을 이용할 경우 프로그래머가 메시지 위임과 관련된 코드를 명시적으로 작성할 필요가 없다
	- 동적인 문맥
		- 메시지를 수신했을 때 실제로 어떤 메서드를 실행할지를 결정하는 것은 컴파일 시점이 아닌 실행 시점에 이뤄지며, 메서드를 탐색하는 경로는 self 참조를 이용해서 결정한다.
	

- self 전송(self send)
```java
public class Lecture {
	public String stats() {
		return String.format("Title: %s, Evaluation Method: %s". title, getEvaluationMethod());
	}

	public String getEvaluationMethod() {
		return "Pass or Fail";
	}
}
```
- getEvaluationMethod()라는 구문은 현재 클래스의 메서드를 호출 하는 것이 아니라 현재 객체에게 getEvaluationMethod 메시지를 전송하는 것이다. 현재 객체란 바로 self 참조가 가리키는 객체이다.
- self 참조가 가리키는 자기 자신에게 메시지를 전송하는 것을 self 전송이라고 부르며 self 참조가 가리키는 바로 그 객체에서부터 메시지 탐색을 다시 시작한다는 것이다.

```java
public class GradeLecture extends Lecture {
	@Override
	public String getEvaluationMethod() {
		
	}
}
```

