
2024-09-01 14:31

Tags: [[객체지향 프로그래밍]]


- 좋은 퍼블릭 인터페이스란?
	- 최소한의 인터페이스와 추상적인 인터페이스라는 조건을 만족할 때 달성 가능하다.
		- 최소한의 인터페이스: 꼭 필요한 오퍼레이션만을 인터페이스에 포함
		- 추상적인 인터페이스: 어떻게 수행하는지가 아니라 무엇을 하는지를 표현
	- 메시지를 먼저 선택하여 협력과는 무관한 오페레이션이 인터페이스에 스며드는 것을 방지하는 [[책임 주도 설계]]를 따르면 좋은 인터페이스를 구축할 수 있다.

- 디미터 법칙(Law of demeter)
	- 객체의 내부 구조에 강하게 결합되지 않도록 협력 경로를 제한하라는 것
	- "낯선 자에게 말하지 말라", "오직 인접한 이웃하고만 말하라", "오직 하나의 도트만 사용하라"
	- 클래스가 특정 조건을 만족하는 대상에게만 메시지를 전송하도록 프로그래밍 해야한다.
		- this 객체
		- 메서드의 매개변수
		- this의 속성
		- this의 속성인 컬렉션의 요소
		- 메서드 내에서 생선된 지역 객체
	- `screening.getMovie().getDiscountconditions()` 와 같이 메시지 전송자가 수신자의 내부 구조에 대해 물어보고 반환받은 요소에 대해 연쇄적으로 메시지를 전송하는 것(기차 충돌)은 디미터 법칙을 위반한 것이다.
		- `screening.calculateFee()` 와 같이 자신이 원하는 것이 무엇인지를 명시하고 단순히 수행하도록 요청해야 한다.
	-  디미터 법칙은 하나의 도트(.)를 강제하는 규칙이 아니다.
		- 기차 충돌처럼 보이는 코드라도 객체의 내부 구현에 대한 어떤 정보도 외부로 노출하지 않는다면 그것은 디미터 법칙을 준수한 것이다.

- 묻지 말고 시켜라(Tell. Don't Ask)
	- 훌륭한 메시지는 객체의 상태에 관해 묻지 말고 원하는 것을 시켜야한다.
	- 메시지 전송자는 메시지 수신자의 상태를 기반으로 결정을 내린 후 메시지 수신자의 상태를 바꿔서는 안된다.
	- 묻지 말고 시켜라 원칙을 따르면 객체의 정보를 이용하는 행동을 객체의 외부가 아닌 내부에 위치시키기 때문에 자연스럽게 정보와 행동을 동일한 클래스 안에 두게 된다.
	- 상태를 묻는 오퍼레이션을 행동을 요청하는 오퍼레이션으로 대체함으로써 인터페이스를 향상시켜라.

- 의도를 드러내는 인터페이스
	- 메서드의 이름을 지을 때 '어떻게'가 아니라 '무엇'을 하는지를 느러내는 것
	- 수행 방법에 관해서는 언급하지 말고 결과와 목적만을 포함하도록 클래스와 오퍼레이션의 이름을 부여하라
	- 오퍼레이션은 클라이언트가 객체에게 무엇을 원하는지를 표현해야 한다. 다시 말해 객체 자신이 아닌 클라이언트의 의도를 표현하는 이름을 가져야 한다.
```java
	// 내부 구현을 드러내는 메소드 (어떻게)
	public class PediodCondition {
		public boolean isSatisfiedByPeriod(Screening screening) {...}
	}

	public class SequenceCondition  {
		public boolean isSatisfiedBySequence(Screening screening) {...}
	}

	// 협력하는 클라이언트의 의도에 부합하는 메소드 (무엇을)
	// 메서드가 어떻게 수행하느냐가 아니라 무엇을 하느냐에 초점을 맞추면 클라이언트 관점에서 
	// 동일한 작업을 수행하는 메서드들을 하나의 타입 계층으로 묶을 수 있는 가능성이 커진다.
	public class PediodCondition implements DiscountCondition {
		public boolean isSatisfiedBy(Screening screening) {...}
	}

	public class SequenceCondition implements DiscountCondition {
		public boolean isSatisfiedBy(Screening screening) {...}
	}
```


- 원칙의 함정
	- 디미터 법칙과 묻지 말고 시켜라 스타일은 객체의 퍼블릭 인터페이스를 깔끔하고 유연하게 만들 수 있는 훌륭한 설계 원칙이지만 절대적인 법칙은 아니다.
	- 설계는 트레이드오프의 산물이므로 원칙이 현재 상황에 부적합하다고 판단된다면 과감하게 원칙을 무시하라. 원칙을 아는 것보다 더 중요한 것은 언제 원칙이 유용하고 언제 유용하지 않은지를 판단할 수 있는 능력을 기르는 것이다.
	- 모든 상황에서 맹목적으로 위임 메서드를 추가하면 같은 퍼블릭 인터페이스 안에 어울리지 않는 오퍼레이션들이 공존하게 된다. 결과적으로 객체는 상관 없는 책임들을 한꺼번에 떠안게 되기 때문에 결과적으로 응집도가 낮아진다.
	- 

# References